var IdealImageSlider=function(){"use strict";var t=function(t){t=t||{};for(var i=1;i<arguments.length;i++){var e=arguments[i];if(e)for(var s in e)e.hasOwnProperty(s)&&("object"==typeof e[s]?deepExtend(t[s],e[s]):t[s]=e[s])}return t},i=function(t,i){return i?t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className):!1},e=function(t,i){i&&(t.classList?t.classList.add(i):t.className+=" "+i)},s=function(t,i){i&&(t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))},n=function(t){return Array.prototype.slice.call(t)},r=function(t,i){if(!t.style.backgroundImage){var e=new Image;e.setAttribute("src",t.getAttribute("data-src")),e.onload=function(){t.style.backgroundImage="url("+t.getAttribute("data-src")+")","function"==typeof i&&i(this)}}},a=function(){var t="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(t).matches?!0:!1},u=function(t,i,e){t.style.webkitTransitionDuration=t.style.MozTransitionDuration=t.style.msTransitionDuration=t.style.OTransitionDuration=t.style.transitionDuration=e+"ms",t.style.webkitTransform=t.style.MozTransform=t.style.msTransform=t.style.OTransform="translateX("+i+"px)"},o=function(t){t.style.removeProperty("-webkit-transition-duration"),t.style.removeProperty("transition-duration"),t.style.removeProperty("-webkit-transform"),t.style.removeProperty("-ms-transform"),t.style.removeProperty("transform")},l={vars:{start:{},delta:{},isScrolling:void 0,direction:null},start:function(t){if(!i(this._attributes.container,this.settings.classes.animating)){var s=t.touches[0];l.vars.start={x:s.pageX,y:s.pageY,time:+new Date},l.vars.delta={},l.vars.isScrolling=void 0,l.vars.direction=null,this.stop(),this.settings.beforeChange.apply(this),e(this._attributes.container,this.settings.classes.touching)}},move:function(t){if(!i(this._attributes.container,this.settings.classes.animating)&&!(t.touches.length>1||t.scale&&1!==t.scale)){var e=t.touches[0];l.vars.delta={x:e.pageX-l.vars.start.x,y:e.pageY-l.vars.start.y},"undefined"==typeof l.vars.isScrolling&&(l.vars.isScrolling=!!(l.vars.isScrolling||Math.abs(l.vars.delta.x)<Math.abs(l.vars.delta.y))),l.vars.isScrolling||(t.preventDefault(),u(this._attributes.previousSlide,l.vars.delta.x-this._attributes.previousSlide.offsetWidth,0),u(this._attributes.currentSlide,l.vars.delta.x,0),u(this._attributes.nextSlide,l.vars.delta.x+this._attributes.currentSlide.offsetWidth,0))}},end:function(){if(!i(this._attributes.container,this.settings.classes.animating)){var t=+new Date-l.vars.start.time,n=Number(t)<250&&Math.abs(l.vars.delta.x)>20||Math.abs(l.vars.delta.x)>this._attributes.currentSlide.offsetWidth/2,r=l.vars.delta.x<0?"next":"previous",a=this.settings.transitionDuration?this.settings.transitionDuration/2:0;l.vars.isScrolling||(n?(l.vars.direction=r,"next"==l.vars.direction?(u(this._attributes.currentSlide,-this._attributes.currentSlide.offsetWidth,a),u(this._attributes.nextSlide,0,a)):(u(this._attributes.previousSlide,0,a),u(this._attributes.currentSlide,this._attributes.currentSlide.offsetWidth,a)),setTimeout(l.transitionEnd.bind(this),a)):"next"==r?(u(this._attributes.currentSlide,0,a),u(this._attributes.nextSlide,this._attributes.currentSlide.offsetWidth,a)):(u(this._attributes.previousSlide,-this._attributes.previousSlide.offsetWidth,a),u(this._attributes.currentSlide,0,a)),a&&(e(this._attributes.container,this.settings.classes.animating),setTimeout(function(){s(this._attributes.container,this.settings.classes.animating)}.bind(this),a)))}},transitionEnd:function(){if(l.vars.direction){o(this._attributes.previousSlide),o(this._attributes.currentSlide),o(this._attributes.nextSlide),s(this._attributes.container,this.settings.classes.touching),s(this._attributes.previousSlide,this.settings.classes.previousSlide),s(this._attributes.currentSlide,this.settings.classes.currentSlide),s(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","true");var t=this._attributes.slides,i=t.indexOf(this._attributes.currentSlide);"next"==l.vars.direction?(this._attributes.previousSlide=this._attributes.currentSlide,this._attributes.currentSlide=t[i+1],this._attributes.nextSlide=t[i+2],"undefined"==typeof this._attributes.currentSlide&&"undefined"==typeof this._attributes.nextSlide?(this._attributes.currentSlide=t[0],this._attributes.nextSlide=t[1]):"undefined"==typeof this._attributes.nextSlide&&(this._attributes.nextSlide=t[0]),r(this._attributes.nextSlide)):(this._attributes.nextSlide=this._attributes.currentSlide,this._attributes.previousSlide=t[i-2],this._attributes.currentSlide=t[i-1],"undefined"==typeof this._attributes.currentSlide&&"undefined"==typeof this._attributes.previousSlide?(this._attributes.currentSlide=t[t.length-1],this._attributes.previousSlide=t[t.length-2]):"undefined"==typeof this._attributes.previousSlide&&(this._attributes.previousSlide=t[t.length-1]),r(this._attributes.previousSlide)),e(this._attributes.previousSlide,this.settings.classes.previousSlide),e(this._attributes.currentSlide,this.settings.classes.currentSlide),e(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","false"),this.settings.afterChange.apply(this)}}},h=function(s){this.settings={selector:"",height:400,interval:4e3,transitionDuration:700,effect:"slide",disableNav:!1,keyboardNav:!0,previousNavSelector:"",nextNavSelector:"",classes:{container:"ideal-image-slider",slide:"iis-slide",previousSlide:"iis-previous-slide",currentSlide:"iis-current-slide",nextSlide:"iis-next-slide",previousNav:"iis-previous-nav",nextNav:"iis-next-nav",animating:"iis-is-animating",touchEnabled:"iis-touch-enabled",touching:"iis-is-touching",directionPrevious:"iis-direction-previous",directionNext:"iis-direction-next"},onInit:function(){},onStart:function(){},onStop:function(){},onDestroy:function(){},beforeChange:function(){},afterChange:function(){}},"string"==typeof s?this.settings.selector=s:"object"==typeof s&&t(this.settings,s);var u=document.querySelector(this.settings.selector);if(!u)return null;var o=n(u.children),h=[];u.innerHTML="",Array.prototype.forEach.call(o,function(i){if(i instanceof HTMLImageElement||i instanceof HTMLAnchorElement){var s=document.createElement("a"),n="",r="";if(i instanceof HTMLAnchorElement){n=i.getAttribute("href"),r=i.getAttribute("target");var o=i.querySelector("img");if(null===o)return;i=o}"undefined"!=typeof i.dataset?(t(s.dataset,i.dataset),s.dataset.src=i.dataset.src?i.dataset.src:i.src,a()&&i.dataset["src-2x"]&&(s.dataset.src=i.dataset["src-2x"])):i.getAttribute("data-src")?s.setAttribute("data-src",i.getAttribute("data-src")):s.setAttribute("data-src",i.getAttribute("src")),n&&s.setAttribute("href",n),r&&s.setAttribute("target",r),i.getAttribute("className")&&e(s,i.getAttribute("className")),i.getAttribute("id")&&s.setAttribute("id",i.getAttribute("id")),i.getAttribute("title")&&s.setAttribute("title",i.getAttribute("title")),i.getAttribute("alt")&&(s.innerHTML=i.getAttribute("alt")),s.setAttribute("role","tabpanel"),s.setAttribute("aria-hidden","true"),s.style.cssText+="-webkit-transition-duration:"+this.settings.transitionDuration+"ms;-moz-transition-duration:"+this.settings.transitionDuration+"ms;-o-transition-duration:"+this.settings.transitionDuration+"ms;transition-duration:"+this.settings.transitionDuration+"ms;",u.appendChild(s),h.push(s)}}.bind(this));var d=h;if(d.length<=1)return u.innerHTML="",Array.prototype.forEach.call(o,function(t){u.appendChild(t)}),null;if(!this.settings.disableNav){var c,b;this.settings.previousNavSelector?c=document.querySelector(this.settings.previousNavSelector):(c=document.createElement("a"),u.appendChild(c)),this.settings.nextNavSelector?b=document.querySelector(this.settings.nextNavSelector):(b=document.createElement("a"),u.appendChild(b)),e(c,this.settings.classes.previousNav),e(b,this.settings.classes.nextNav),c.addEventListener("click",function(){return i(this._attributes.container,this.settings.classes.animating)?!1:(this.stop(),void this.previousSlide())}.bind(this)),b.addEventListener("click",function(){return i(this._attributes.container,this.settings.classes.animating)?!1:(this.stop(),void this.nextSlide())}.bind(this)),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(this.settings.effect="slide",c.style.display="none",b.style.display="none",e(u,this.settings.classes.touchEnabled),u.addEventListener("touchstart",l.start.bind(this),!1),u.addEventListener("touchmove",l.move.bind(this),!1),u.addEventListener("touchend",l.end.bind(this),!1)),this.settings.keyboardNav&&document.addEventListener("keyup",function(t){t=t||window.event;var e="number"==typeof t.which?t.which:t.keyCode;if(37==e){if(i(this._attributes.container,this.settings.classes.animating))return!1;this.stop(),this.previousSlide()}else if(39==e){if(i(this._attributes.container,this.settings.classes.animating))return!1;this.stop(),this.nextSlide()}}.bind(this))}this._attributes={container:u,slides:d,previousSlide:"undefined"!=typeof d[d.length-1]?d[d.length-1]:d[0],currentSlide:d[0],nextSlide:"undefined"!=typeof d[1]?d[1]:d[0],timerId:0,origChildren:o},this.settings.height&&(this._attributes.container.style.height=this.settings.height+"px"),e(u,this.settings.classes.container),e(u,"iis-effect-"+this.settings.effect),Array.prototype.forEach.call(this._attributes.slides,function(t){e(t,this.settings.classes.slide)}.bind(this)),e(this._attributes.previousSlide,this.settings.classes.previousSlide),e(this._attributes.currentSlide,this.settings.classes.currentSlide),e(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","false"),r(this._attributes.currentSlide,function(){this.settings.onInit.apply(this)}.bind(this)),r(this._attributes.previousSlide),r(this._attributes.nextSlide)};return h.prototype.get=function(t){return this._attributes?this._attributes.hasOwnProperty(t)?this._attributes[t]:void 0:null},h.prototype.set=function(t,i){return this._attributes?this._attributes[t]=i:null},h.prototype.start=function(){this._attributes&&(this._attributes.timerId=setInterval(this.nextSlide.bind(this),this.settings.interval),this.settings.onStart.apply(this),window.onblur=function(){this.stop()}.bind(this))},h.prototype.stop=function(){this._attributes&&(clearInterval(this._attributes.timerId),this._attributes.timerId=0,this.settings.onStop.apply(this))},h.prototype.previousSlide=function(){this.settings.beforeChange.apply(this),s(this._attributes.previousSlide,this.settings.classes.previousSlide),s(this._attributes.currentSlide,this.settings.classes.currentSlide),s(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","true");var t=this._attributes.slides,i=t.indexOf(this._attributes.currentSlide);this._attributes.nextSlide=this._attributes.currentSlide,this._attributes.previousSlide=t[i-2],this._attributes.currentSlide=t[i-1],"undefined"==typeof this._attributes.currentSlide&&"undefined"==typeof this._attributes.previousSlide?(this._attributes.currentSlide=t[t.length-1],this._attributes.previousSlide=t[t.length-2]):"undefined"==typeof this._attributes.previousSlide&&(this._attributes.previousSlide=t[t.length-1]),r(this._attributes.previousSlide),e(this._attributes.previousSlide,this.settings.classes.previousSlide),e(this._attributes.currentSlide,this.settings.classes.currentSlide),e(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","false"),e(this._attributes.container,this.settings.classes.directionPrevious),setTimeout(function(){s(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration),this.settings.transitionDuration&&(e(this._attributes.container,this.settings.classes.animating),setTimeout(function(){s(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration)),this.settings.afterChange.apply(this)},h.prototype.nextSlide=function(){this.settings.beforeChange.apply(this),s(this._attributes.previousSlide,this.settings.classes.previousSlide),s(this._attributes.currentSlide,this.settings.classes.currentSlide),s(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","true");var t=this._attributes.slides,i=t.indexOf(this._attributes.currentSlide);this._attributes.previousSlide=this._attributes.currentSlide,this._attributes.currentSlide=t[i+1],this._attributes.nextSlide=t[i+2],"undefined"==typeof this._attributes.currentSlide&&"undefined"==typeof this._attributes.nextSlide?(this._attributes.currentSlide=t[0],this._attributes.nextSlide=t[1]):"undefined"==typeof this._attributes.nextSlide&&(this._attributes.nextSlide=t[0]),r(this._attributes.nextSlide),e(this._attributes.previousSlide,this.settings.classes.previousSlide),e(this._attributes.currentSlide,this.settings.classes.currentSlide),e(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","false"),e(this._attributes.container,this.settings.classes.directionNext),setTimeout(function(){s(this._attributes.container,this.settings.classes.directionNext)}.bind(this),this.settings.transitionDuration),this.settings.transitionDuration&&(e(this._attributes.container,this.settings.classes.animating),setTimeout(function(){s(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration)),this.settings.afterChange.apply(this)},h.prototype.gotoSlide=function(t){this.settings.beforeChange.apply(this),this.stop(),s(this._attributes.previousSlide,this.settings.classes.previousSlide),s(this._attributes.currentSlide,this.settings.classes.currentSlide),s(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","true"),t--;var i=this._attributes.slides,n=i.indexOf(this._attributes.currentSlide);this._attributes.previousSlide=i[t-1],this._attributes.currentSlide=i[t],this._attributes.nextSlide=i[t+1],"undefined"==typeof this._attributes.previousSlide&&(this._attributes.previousSlide=i[i.length-1]),"undefined"==typeof this._attributes.nextSlide&&(this._attributes.nextSlide=i[0]),r(this._attributes.previousSlide),r(this._attributes.currentSlide),r(this._attributes.nextSlide),e(this._attributes.previousSlide,this.settings.classes.previousSlide),e(this._attributes.currentSlide,this.settings.classes.currentSlide),e(this._attributes.nextSlide,this.settings.classes.nextSlide),this._attributes.currentSlide.setAttribute("aria-hidden","false"),n>t?(e(this._attributes.container,this.settings.classes.directionPrevious),setTimeout(function(){s(this._attributes.container,this.settings.classes.directionPrevious)}.bind(this),this.settings.transitionDuration)):(e(this._attributes.container,this.settings.classes.directionNext),setTimeout(function(){s(this._attributes.container,this.settings.classes.directionNext)}.bind(this),this.settings.transitionDuration)),this.settings.transitionDuration&&(e(this._attributes.container,this.settings.classes.animating),setTimeout(function(){s(this._attributes.container,this.settings.classes.animating)}.bind(this),this.settings.transitionDuration)),this.settings.afterChange.apply(this)},h.prototype.destroy=function(){clearInterval(this._attributes.timerId),this._attributes.timerId=0,this._attributes.container.innerHTML="",Array.prototype.forEach.call(this._attributes.origChildren,function(t){this._attributes.container.appendChild(t)}.bind(this)),s(this._attributes.container,this.settings.classes.container),s(this._attributes.container,"iis-effect-"+this.settings.effect),this._attributes.container.style.height="",this.settings.onDestroy.apply(this)},{_hasClass:i,_addClass:e,_removeClass:s,Slider:h}}();